# Принцип устройства сетевой модели Osi

Сетевая модель OSI имеет семь уровней, иерархически расположенных от большего к меньшему. Cамым верхним является седьмой (прикладной), а самым нижним — первый (физический). Модель OSI разрабатывалась еще в 1970-х годах, чтобы описать архитектуру и принципы работы сетей передачи данных.

В процессе передачи данных всегда участвуют устройство-отправитель, устройство-получатель, а также сами данные, которые должны быть переданы и получены. С точки зрения рядового пользователя задача элементарна — нужно взять и отправить эти данные. Все, что происходит при отправке и приеме данных, детально описывает семиуровневая модель OSI.

На седьмом уровне информация представляется в виде данных, на первом — в виде бит. Процесс, когда информация отправляется и переходит из данных в биты, называется инкапсуляцией. Обратный процесс, когда информация, полученная в битах на первом уровне, переходит в данные на седьмом, называется декапсуляцией. На каждом из семи уровней информация представляется в виде блоков данных протокола — PDU (Protocol Data Unit).

Рассмотрим на примере: пользователь 1 отправляет картинку, которая обрабатывается на седьмом уровне в виде данных, данные должны пройти все уровни до самого нижнего (первого), где будут представлены как биты. Этот процесс называется инкапсуляцией. Компьютер пользователя 2 принимает биты, которые должны снова стать данными. Этот обратный процесс называется декапсуляция. 

![image](https://user-images.githubusercontent.com/59168899/225724121-bc75efcd-886d-4158-a525-0cdaf07d698e.png)

# Первый, физический уровень (physical layer, L1)

Начнем с самого нижнего уровня. Он отвечает за обмен физическими сигналами между физическими устройствами, «железом». Компьютерное железо не понимает, что такое картинка или что на ней изображено, «железу» картинка понятна только в виде набора нулей и единиц, то есть бит.

Каждый уровень имеет свои PDU (Protocol Data Unit), представляемые в той форме, которая будет понятна на данном уровне и, возможно, на следующем до преобразования. Работа с чистыми данными происходит только на уровнях с пятого по седьмой.

Устройства физического уровня оперируют битами. Они передаются по кабелям (например, через оптоволокно) или без — например, через Bluetooth или IRDA, Wi-Fi, GSM, 4G и так далее.

# Второй уровень, канальный (data link layer, L2)

Когда два пользователя находятся в одной сети, состоящей только из двух устройств, — это идеальный случай. Но что если этих устройств больше?

Второй уровень решает проблему адресации при передаче информации. Канальный уровень получает биты и превращает их в кадры (frame, также «фреймы»). Задача здесь — сформировать кадры с адресом отправителя и получателя, после чего отправить их по сети.

У канального уровня есть два подуровня — это MAC и LLC. MAC (Media Access Control, контроль доступа к среде) отвечает за присвоение физических MAC-адресов, а LLC (Logical Link Control, контроль логической связи) занимается проверкой и исправлением данных, управляет их передачей. Для упрощения мы указываем LLC на втором уровне модели, но, если быть точными, LLC нельзя отнести полностью ни к первому, ни ко второму уровню — он между.

На втором уровне OSI работают коммутаторы, их задача — передать сформированные кадры от одного устройства к другому, используя в качестве адресов только физические MAC-адреса.

На канальном уровне активно используется протокол ARP (Address Resolution Protocol — протокол определения адреса). С помощью него 64-битные MAC-адреса сопоставляются с 32-битными IP-адресами и наоборот, тем самым обеспечивается инкапсуляция и декапсуляция данных.

# Третий уровень, сетевой (network layer, L3)

На третьем уровне появляется новое понятие — маршрутизация. Для этой задачи были созданы устройства третьего уровня — маршрутизаторы (их еще называют роутерами). Маршрутизаторы получают MAC-адрес от коммутаторов с предыдущего уровня и занимаются построением маршрута от одного устройства к другому с учетом всех потенциальных неполадок в сети.

# Четвертый уровень, транспортный (transport layer, L4)

![image](https://user-images.githubusercontent.com/59168899/225724623-4a955d78-68d0-4023-908d-126459d12110.png)

Все семь уровней модели OSI можно условно разделить на две группы:

Media layers (уровни среды),
Host layers (уровни хоста).
Уровни группы Media Layers (L1, L2, L3) занимаются передачей информации (по кабелю или беспроводной сети), используются сетевыми устройствами, такими как коммутаторы, маршрутизаторы и т.п. Уровни группы Host Layers (L4, L5, L6, L7) используются непосредственно на устройствах, будь то стационарные компьютеры или мобильные устройства.

Четвертый уровень — это посредник между Host Layers и Media Layers, относящийся скорее к первым, чем к последним. Его главной задачей является транспортировка пакетов. Естественно, при транспортировке возможны потери, но некоторые типы данных более чувствительны к потерям, чем другие. Например, если в тексте потеряются гласные, то будет сложно понять смысл, а если из видеопотока пропадет пара кадров, то это практически никак не скажется на конечном пользователе. Поэтому при передаче данных, наиболее чувствительных к потерям на транспортном уровне, используется протокол TCP, контролирующий целостность доставленной информации.

Для мультимедийных файлов небольшие потери не так важны, гораздо критичнее будет задержка. Для передачи таких данных, наиболее чувствительных к задержкам, используется протокол UDP, позволяющий организовать связь без установки соединения.

При передаче по протоколу TCP данные делятся на сегменты. Сегмент — это часть пакета. Когда приходит пакет данных, который превышает пропускную способность сети, пакет делится на сегменты допустимого размера. Сегментация пакетов также требуется в ненадежных сетях, когда существует большая вероятность того, что большой пакет будет потерян. При передаче данных по протоколу UDP пакеты данных делятся уже на датаграммы. Датаграмма (datagram) — это тоже часть пакета, но ее нельзя путать с сегментом.

Главное отличие датаграмм — в автономности. Каждая датаграмма содержит все необходимые заголовки, чтобы дойти до конечного адресата, поэтому они не зависят от сети, могут доставляться разными маршрутами и в разном порядке. При потере датаграмм или сегментов получаются «битые» куски данных, которые не получится корректно обработать.

Первые четыре уровня — специализация сетевых инженеров. С последними тремя они не так часто сталкиваются, потому что пятым, шестым и седьмым занимаются разработчики.

# Пятый уровень, сеансовый (session layer, L5)

Пятый уровень оперирует чистыми данными. Помимо пятого, чистые данные используются также на шестом и седьмом уровне. Сеансовый уровень отвечает за поддержку сеанса или сессии связи. Пятый уровень оказывает услугу следующему: управляет взаимодействием между приложениями, открывает возможности синхронизации задач, завершения сеанса, обмена информации.

Службы сеансового уровня зачастую применяются в средах приложений, требующих удаленного вызова процедур, т.е. чтобы запрашивать выполнение действий на удаленных компьютерах или независимых системах на одном устройстве (при наличии нескольких ОС).

Примером работы пятого уровня может служить видеозвонок по сети. Во время видеосвязи необходимо, чтобы два потока данных (аудио и видео) шли синхронно. Когда к разговору двоих человек прибавится третий — получится уже конференция. Задача пятого уровня — сделать так, чтобы собеседники могли понять, кто сейчас говорит.

# Шестой уровень, представления данных (presentation layer, L6)

О задачах уровня представления вновь говорит его название. Шестой уровень отвечает за преобразование протоколов и кодирование/декодирование данных. Шестой уровень также занимается представлением картинок (в JPEG, GIF и т.д.), а также видео-аудио (в MPEG, QuickTime). А помимо этого → шифрованием данных, когда при передаче их необходимо защитить.

![image](https://user-images.githubusercontent.com/59168899/225725076-cb248165-a74f-45bf-8a67-6c990d21cf2b.png)

# Седьмой уровень, прикладной (application layer)

Седьмой уровень иногда еще называют уровень приложений, но чтобы не запутаться можно использовать оригинальное название — application layer. Прикладной уровень — это то, с чем взаимодействуют пользователи, своего рода графический интерфейс всей модели OSI, с другими он взаимодействует по минимуму.

Все услуги, получаемые седьмым уровнем от других, используются для доставки данных до пользователя. Протоколам седьмого уровня не требуется обеспечивать маршрутизацию или гарантировать доставку данных, когда об этом уже позаботились предыдущие шесть. Задача седьмого уровня — использовать свои протоколы, чтобы пользователь увидел данные в понятном ему виде.


# Java 

DynamicOSI® Java OSI Stack SDK — это автономный независимый от платформы пакет средств разработки программного обеспечения (SDK) для стека OSI верхнего уровня который состоит из простого Java API и стека протоколов для выполнения верхнего уровня Связь OSI через RFC1006 (TCP/IP). Он обеспечивает 100% Java, полностью межоперабельная, совместимая со стандартом реализация стандарта RFC1006 для OSI через TCP, включая реализацию транспортного уровня OSI, который стандарты, необходимые для межоперабельной связи между:

- Сервисные точки доступа транспортного уровня OSI (TSAP).
- Точки доступа к службам сеансового уровня OSI (SSP).
- Точки доступа к службам на уровне представления OSI (PSAP).
- Сущности прикладного уровня OSI
- С помощью этого стекового API теперь вы можете разрабатывать 100% Java-приложения, которые взаимодействуют с другие системы OSI через RFC1006. Автономный стек API основан на проверенном временем Стек OSI/RFC1006, используемый в продуктах Monfox DynamicTMN® CMIP, которые используется во всем мире с 1999 года.

Текущая реализация предоставляет легкий высокоуровневый API стека OSI который реализует следующие компоненты:

<img width="524" alt="image" src="https://user-images.githubusercontent.com/59168899/225732307-487498d4-a8ba-4b19-a1c5-47f63ae1e25d.png">

С помощью этого API можно разрабатывать приложения OSI на любом уровне от транспортного уровня до приложения Слой. Вы также можете реализовать собственные модули протокола прикладного уровня с помощью презентации Layer API, ACSE API и ASN.1 API.

# Ключевые особенности
Некоторые из общих функций пакета SDK стека DynamicOSI® OSI:

- 100% Java (Java 1.4 SDK или новее, не использует JNI)
- Поддержка обоих режимов подключения инициатора/ответчика
- Выполняется в пространстве приложения (без отдельных процессов стека)
- Совместимость со всеми 3-ми сторонними OSI через стеки на основе RFC1006

# Пакеты

## АКСЕ
- Элемент службы управления ассоциациями (ACSE)
- ACSE поддерживается большинством протоколов уровня приложений
- ACSI Java API для настройки и управления
- Используется с API уровня представления
- МСЭ-Т X.217 | ISO/IEC 8649: Определение службы элемента службы ассоциативного управления (ACSE)
- МСЭ-Т X.227 | ISO/IEC 8650-1: Определение протокола ACSE

## ASN.1
- АСН1. Компилятор/API (См.: Java ASN.1 SDK)
- Поддержка кодировок BER/CER и DER
- Поддержка последних спецификаций ASN.1
- ASN.1 API метаданных для доступа во время выполнения
- Используется с API уровня представления
- Может использоваться автономно
- МСЭ-Т X.680 | ISO/IEC 8824-1: Абстрактная синтаксическая нотация (ASN.1)
- МСЭ-Т X.681 | ISO/IEC 8824-2: синтаксис информационных объектов ASN.1
- МСЭ-Т X.682 | ISO/IEC 8824-3: Спецификация ограничений ASN.1
- МСЭ-Т X.683 | ISO/IEC 8824-4: ASN.1 Параметризация ASN.1
- МСЭ-Т X.690 | ISO/IEC 8825-1: ASN.1 Основные/канонические/выдающиеся правила кодирования (BER/DER/CER)

## Уровень представления
- Java API уровня представления
- Адресация уровня представления на основе URI
- Используется для разработки приложений прикладного уровня
- Использует ASN.1 для определения PDU прикладного уровня
- МСЭ-Т X.216 | ISO/IEC 8822: OSI - Определение сервиса презентации
- МСЭ-Т X.226 | ISO/IEC 8823-1: OSI - Спецификация протокола представления

## Сеансовый уровень
- Java API сеансового уровня
- Адресация сеансового уровня на основе URI
- Поддержка клиентских и серверных API
- Поддержка как подключений, так и операций с данными
- Поддерживает автоматическую сегментацию и т.д.
- МСЭ-Т X.215 | ISO/IEC 8326: OSI - Определение службы сеансов
- МСЭ-Т X.225 | ISO/IEC 8327: OSI - Спецификация протоколов сеансов

## Транспортный уровень
- Java API транспортного уровня
- Адресация транспортного уровня на основе URI
- Поддержка RFC1006
- Клиентские и серверные API
- Синхронные и асинхронные API
- МСЭ-Т X.214 | ISO/IEC 8072: OSI - Определение транспортной услуги
- МСЭ-Т X.224 | ISO/IEC 8073: OSI - Спецификация транспортного протокола

## Стек RFC 1006
- Транспортный модуль RFC1006
- Адресация сетевого уровня на основе URI
- RFC 1006: Служба транспорта ISO поверх версии TCP: 3

## [Скачать DynamicOSI® Java OSI Stack SDK](https://monfox.com/download.php?products[DOSI]=checked)
